<div class="container">
  <div class="user-form">
    <form [formGroup]="userForm" (submit)="onSubmit()">
      <div class="row">
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="firstName">FirstName</label>
            <input
              type="text"
              class="form-control"
              id="firstName"
              formControlName="firstname"
              placeholder="Enter your firstname"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.firstname }
              "
            >
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="lastName">LastName</label>
            <input
              type="text"
              class="form-control"
              placeholder="Enter your lastname"
              id="lastName"
              formControlName="lastname"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.lastname }
              "
            >
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="userName">Username</label>
            <input
              type="text"
              class="form-control"
              id="userName"
              formControlName="username"
              placeholder="Enter your username"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.username }
              "
            >
            </ng-container>
            <ng-container *ngIf="errorMsg">
              <small class="form-text text-danger">{{ errorMsg }}</small>
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="inputPassword">Password</label>
            <input
              type="password"
              class="form-control"
              placeholder="Enter your password"
              id="inputPassword"
              formControlName="password"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.password }
              "
            >
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="Email">Email</label>
            <input
              type="text"
              class="form-control"
              id="Email"
              formControlName="email"
              placeholder="Enter your email"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.email }
              "
            >
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="PhoneNumber">Phone Number</label>
            <input
              type="text"
              class="form-control"
              id="PhoneNumber"
              formControlName="phone"
              placeholder="Enter your phone number"
            />
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.phone }
              "
            >
            </ng-container>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <div class="form-group">
            <label for="Department">Department</label>
            <select
              class="form-control"
              id="Department"
              formControlName="department"
            >
              <option value="default">Default</option>
              <ng-container *ngFor="let dept of departments">
                <option [value]="dept?.value">{{ dept?.value }}</option>
              </ng-container>
            </select>
            <ng-container
              *ngTemplateOutlet="
                errorMessagesTemp;
                context: { $implicit: userContols?.department }
              "
            >
            </ng-container>
          </div>
        </div>
      </div>

      <div class="form-group text-center">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!userForm.valid"
        >
          <span *ngIf="userId === 0">Create User</span>
          <span *ngIf="userId !== 0">Edit User</span>
        </button>
      </div>
    </form>
  </div>
</div>

<ng-template #errorMessagesTemp let-control>
  <ng-container *ngIf="control?.touched || control?.dirty">
    <small
      class="form-text text-danger"
      *ngFor="let errorMessage of control?.errorMessages"
    >
      {{ errorMessage }}<br />
    </small>
  </ng-container>
</ng-template>
